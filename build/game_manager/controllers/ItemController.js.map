{"version":3,"file":"ItemController.js","names":["_ChestModel","_interopRequireDefault","require","_ItemModel","itemData","_interopRequireWildcard","_uuid","_utils","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ItemController","exports","io","_classCallCheck2","chests","items","itemDictionary","chest","createChest","bind","item","createItem","drop","_createClass2","key","value","_eventDrop","socket","_this","on","x","y","setupEventListeners","_this2","itemId","emit","deleteItems","addItems","addChest","chestId","deleteChest","ChestModel","randomNumber","concat","v4","id","randomItem","Math","floor","random","length","ItemModel","name","frame","getRandonValues","WeaponTypes","MELEE"],"sources":["../../../src/game_manager/controllers/ItemController.js"],"sourcesContent":["import ChestModel from \"../../models/ChestModel\";\nimport ItemModel from \"../../models/ItemModel\";\nimport * as itemData from \"../../../public/assets/level/tools.json\";\nimport { v4 } from \"uuid\";\nimport { getRandonValues, randomNumber, WeaponTypes } from \"../utils\";\n\nexport default class ItemController {\n  constructor(io) {\n    this.chests = {};\n    this.items = {};\n    this.io = io;\n\n    this.itemDictionary = {\n      chest: this.createChest.bind(this),\n      item: this.createItem.bind(this),\n      \"\": this.drop.bind(this),\n    };\n  }\n\n  _eventDrop(socket) {\n    return socket.on(\"dropItem\", (x, y, item) => {\n      this.itemDictionary[item](x, y);\n    });\n  }\n\n  setupEventListeners(socket) {\n    this._eventDrop(socket);\n    socket.on(\"playerCollectedItem\", (itemId) => {\n      socket.emit(\"collectedItem\", this.items[itemId]);\n      this.deleteItems(itemId);\n    });\n  }\n\n  addItems(itemId, item) {\n    this.items[itemId] = item;\n    this.io.emit(\"itemSpawned\", item);\n  }\n\n  deleteItems(itemId) {\n    delete this.items[itemId];\n    this.io.emit(\"itemRemoved\", itemId);\n  }\n\n  addChest(chestId, chest) {\n    this.chests[chestId] = chest;\n    this.io.emit(\"chestSpawned\", chest);\n  }\n\n  deleteChest(chestId) {\n    this.io.emit(\"chestRemoved\", chestId);\n  }\n\n  drop(x, y) {}\n\n  createChest(x, y) {\n    const chest = new ChestModel(x, y, randomNumber(10, 20), `chest-${v4()}`);\n    this.addChest(chest.id, chest);\n  }\n\n  createItem(x, y) {\n    const randomItem =\n      itemData.items[Math.floor(Math.random() * itemData.items.length)];\n\n    const item = new ItemModel(\n      x,\n      y,\n      `item-${v4()}`,\n      randomItem.name,\n      randomItem.frame,\n      getRandonValues(),\n      getRandonValues(),\n      getRandonValues(),\n      WeaponTypes.MELEE,\n      \"Description\"\n    );\n\n    this.addItems(item.id, item);\n  }\n}\n"],"mappings":"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","ignoreList":[]}