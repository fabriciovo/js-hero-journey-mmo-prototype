{"version":3,"file":"PlayerModel.js","names":["PlayerModel","exports","playerId","spawnLocations","players","name","key","actionB","playerSchema","_classCallCheck2","attack","defense","health","maxHealth","gold","id","playerName","items","equipedItems","level","exp","maxExp","potions","maxNumberOfItems","actionAActive","potionAActive","flipX","location","generateLocation","x","y","_createClass2","value","addItem","item","equipItem","attackBonus","defenseBonus","healthBonus","removeItem","removeEquipedItem","itemId","canPickupItem","Object","keys","length","canEquipItem","playerAttacked","damage","updateHealth","updateGold","potion","updateExp","levelUp","calcNewExp","respawn"],"sources":["../../src/models/PlayerModel.js"],"sourcesContent":["export default class PlayerModel {\n  constructor(\n    playerId,\n    spawnLocations,\n    players,\n    name,\n    key,\n    actionB,\n    playerSchema\n  ) {\n    this.attack = playerSchema.attack;\n    this.defense = playerSchema.defense;\n    this.health = playerSchema.health;\n    this.maxHealth = playerSchema.maxHealth;\n    this.gold = playerSchema.gold;\n    this.id = playerId;\n    this.playerName = name;\n    this.key = key;\n    this.items = playerSchema.items || {};\n    this.equipedItems = playerSchema.equipedItems || {};\n    this.level = playerSchema.level;\n    this.exp = playerSchema.exp;\n    this.maxExp = playerSchema.maxExp;\n    this.potions = playerSchema.potions;\n    //this.playerItems =  {};\n\n    this.maxNumberOfItems = 5;\n\n    this.spawnLocations = spawnLocations;\n    this.actionAActive = false;\n    this.potionAActive = false;\n    this.flipX = true;\n    const location = this.generateLocation(players);\n    this.x = location[0];\n    this.y = location[1];\n  }\n\n  addItem(item) {\n    this.items[item.id] = item;\n  }\n\n  equipItem(item) {\n    this.equipedItems[item.id] = item;\n\n    this.attack += this.equipedItems[item.id].attackBonus;\n    this.defense += this.equipedItems[item.id].defenseBonus;\n    this.maxHealth += this.equipedItems[item.id].healthBonus;\n    this.removeItem(item.id);\n  }\n\n  removeEquipedItem(itemId) {\n    this.attack -= this.equipedItems[itemId].attackBonus;\n    this.defense -= this.equipedItems[itemId].defenseBonus;\n    this.maxHealth -= this.equipedItems[itemId].healthBonus;\n    delete this.equipedItems[itemId];\n  }\n\n  removeItem(itemId) {\n    // this.attack -= this.items[itemId].attackBonus;\n    // this.defense -= this.items[itemId].defenseBonus;\n    // this.maxHealth -= this.items[itemId].healthBonus;\n    delete this.items[itemId];\n  }\n\n  canPickupItem() {\n    if (Object.keys(this.items).length < 5) {\n      return true;\n    }\n    return false;\n  }\n\n  canEquipItem() {\n    if (Object.keys(this.equipedItems).length < 5) {\n      return true;\n    }\n    return false;\n  }\n\n  playerAttacked(attack) {\n    let damage = this.defense - attack;\n    if (damage > 0) damage = 0;\n\n    this.updateHealth(damage);\n  }\n\n  updateGold(gold) {\n    this.gold += gold;\n  }\n\n  potion(health) {\n    this.updateHealth(health);\n    this.potions--;\n  }\n\n  updateExp(exp) {\n    this.exp += exp;\n  }\n\n  levelUp() {\n    this.attack += 3;\n    this.defense += 2;\n    this.maxHealth += 1;\n    this.level++;\n    const calcNewExp = this.exp - this.maxExp;\n    this.exp = calcNewExp <= 0 ? 0 : calcNewExp;\n    this.maxExp = this.maxExp * 2;\n  }\n\n  updateHealth(health) {\n    this.health += health;\n    if (this.health > this.maxHealth) this.health = this.maxHealth;\n  }\n\n  respawn(players) {\n    this.health = this.maxHealth;\n    const location = this.generateLocation(players);\n    this.x = location[0];\n    this.y = location[1];\n  }\n\n  generateLocation(players) {\n    return [200, 200];\n  }\n}\n"],"mappings":"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","ignoreList":[]}